<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ¦‚è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - AI Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.7;
            color: #333;
            background: #f8f9fa;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        h1 {
            color: #2563eb;
            border-bottom: 3px solid #2563eb;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #1e40af;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
            font-size: 1.8em;
        }

        h3 {
            color: #1e3a8a;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        h4 {
            color: #374151;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        p {
            margin-bottom: 15px;
        }

        ul, ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "Courier New", monospace;
            font-size: 0.9em;
            color: #e11d48;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: "Courier New", monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #e5e7eb;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #f3f4f6;
            font-weight: 600;
            color: #1f2937;
        }

        tr:nth-child(even) {
            background: #f9fafb;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge-primary {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-info {
            background: #e0e7ff;
            color: #3730a3;
        }

        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #0284c7;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .toc {
            background: #f9fafb;
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
            border: 1px solid #e5e7eb;
        }

        .toc h3 {
            margin-top: 0;
            color: #1f2937;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc li {
            margin-bottom: 5px;
        }

        .toc a {
            color: #2563eb;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        .meta-info {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .meta-info strong {
            display: inline-block;
            width: 150px;
            color: #1f2937;
        }

        hr {
            border: none;
            border-top: 1px solid #e5e7eb;
            margin: 40px 0;
        }

        .flow-diagram {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            line-height: 2;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ¦‚è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h1>

        <div class="meta-info">
            <p><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå:</strong> AI Management System</p>
            <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> 0.0.0</p>
            <p><strong>ã‚¿ã‚¤ãƒ—:</strong> é£²é£Ÿãƒã‚§ãƒ¼ãƒ³å‘ã‘çµŒå–¶ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œï¼‰</p>
            <p><strong>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹:</strong> <code>/tmp/cc-agent/57978924/project</code></p>
        </div>

        <div class="toc">
            <h3>ç›®æ¬¡</h3>
            <ul>
                <li><a href="#tech-stack">1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</a></li>
                <li><a href="#project-structure">2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ </a></li>
                <li><a href="#features">3. ä¸»è¦æ©Ÿèƒ½</a></li>
                <li><a href="#database">4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</a></li>
                <li><a href="#edge-functions">5. Supabase Edge Functions</a></li>
                <li><a href="#env-vars">6. ç’°å¢ƒå¤‰æ•°</a></li>
                <li><a href="#routing">7. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ </a></li>
                <li><a href="#deployment">8. é–‹ç™ºãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤</a></li>
                <li><a href="#data-flow">9. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</a></li>
                <li><a href="#state-management">10. çŠ¶æ…‹ç®¡ç†</a></li>
                <li><a href="#security">11. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–</a></li>
                <li><a href="#performance">12. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</a></li>
                <li><a href="#testing">13. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥</a></li>
                <li><a href="#roadmap">14. ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»</a></li>
                <li><a href="#troubleshooting">15. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</a></li>
                <li><a href="#monitoring">16. ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹</a></li>
                <li><a href="#license">17. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»åˆ©ç”¨è¦ç´„</a></li>
                <li><a href="#contact">18. é€£çµ¡å…ˆãƒ»ã‚µãƒãƒ¼ãƒˆ</a></li>
                <li><a href="#changelog">19. å¤‰æ›´å±¥æ­´</a></li>
            </ul>
        </div>

        <hr>

        <h2 id="tech-stack">1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h2>

        <h3>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</h3>
        <ul>
            <li><strong>React</strong> 18.3.1 - UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</li>
            <li><strong>TypeScript</strong> 5.5.3 - å‹å®‰å…¨ãªé–‹ç™º</li>
            <li><strong>Vite</strong> 5.4.2 - é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«</li>
            <li><strong>React Router DOM</strong> 6.28.0 - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</li>
            <li><strong>Tailwind CSS</strong> 3.4.1 - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS</li>
        </ul>

        <h3>UIãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³</h3>
        <ul>
            <li><strong>Radix UI</strong> - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Dropdown Menu, Progress, Slot, Tabs)</li>
            <li><strong>Lucide React</strong> 0.544.0 - ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li>
            <li><strong>Class Variance Authority</strong> - æ¡ä»¶ä»˜ãã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°</li>
            <li><strong>clsx / tailwind-merge</strong> - ã‚¯ãƒ©ã‚¹åçµåˆ</li>
        </ul>

        <h3>ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–</h3>
        <ul>
            <li><strong>Chart.js</strong> 4.5.0 + <strong>react-chartjs-2</strong> 5.3.0</li>
            <li><strong>Recharts</strong> 3.2.0</li>
            <li><strong>TanStack React Table</strong> 8.20.5 - é«˜æ©Ÿèƒ½ãƒ†ãƒ¼ãƒ–ãƒ«</li>
        </ul>

        <h3>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©</h3>
        <ul>
            <li><strong>Supabase</strong> - BaaS (Backend as a Service)
                <ul>
                    <li>èªè¨¼ (Email/Password)</li>
                    <li>PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</li>
                    <li>Row Level Security (RLS)</li>
                    <li>Edge Functions (Deno)</li>
                    <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½</li>
                </ul>
            </li>
            <li><strong>Supabase Client</strong> 2.39.3</li>
        </ul>

        <h3>å¤–éƒ¨APIé€£æº</h3>
        <ul>
            <li><strong>OpenAI API</strong> - AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½</li>
            <li><strong>Google Sheets API</strong> - ãƒ‡ãƒ¼ã‚¿åŒæœŸãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</li>
            <li><strong>LINE Messaging API</strong> - LINE Botï¼ˆæœªå®Ÿè£…ï¼‰</li>
        </ul>

        <h3>ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</h3>
        <ul>
            <li><strong>date-fns</strong> 4.1.0 - æ—¥ä»˜æ“ä½œ</li>
            <li><strong>Terser</strong> 5.44.0 - ã‚³ãƒ¼ãƒ‰åœ§ç¸®</li>
        </ul>

        <hr>

        <h2 id="project-structure">2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ </h2>

        <pre><code>project/
â”œâ”€â”€ src/                          # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ components/               # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (68ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ Admin/               # ç®¡ç†è€…æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ Auth/                # èªè¨¼UI
â”‚   â”‚   â”œâ”€â”€ Charts/              # ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Chat/                # AIãƒãƒ£ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ Dashboard/           # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ Organization/        # çµ„ç¹”ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Reports/             # ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ contexts/                # React Context (4ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ hooks/                   # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (10ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ pages/                   # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (14ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”œâ”€â”€ services/                # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»API (8ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â””â”€â”€ types/                   # TypeScriptå‹å®šç¾©
â”‚
â”œâ”€â”€ supabase/                    # Supabaseãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ functions/               # Edge Functions (5å€‹)
â”‚   â””â”€â”€ migrations/              # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (53ãƒ•ã‚¡ã‚¤ãƒ«, 7,254è¡Œ)
â”‚
â””â”€â”€ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ/ (16ãƒ•ã‚¡ã‚¤ãƒ«)</code></pre>

        <div class="info-box">
            <strong>çµ±è¨ˆ:</strong>
            <ul>
                <li>TypeScript/TSXãƒ•ã‚¡ã‚¤ãƒ«: 122å€‹</li>
                <li>Supabaseãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 53ãƒ•ã‚¡ã‚¤ãƒ« (7,254è¡Œ)</li>
                <li>Edge Functions: 5å€‹</li>
            </ul>
        </div>

        <hr>

        <h2 id="features">3. ä¸»è¦æ©Ÿèƒ½</h2>

        <h3>3.1 èªè¨¼ãƒ»æ¨©é™ç®¡ç†</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> Supabase Auth ã«ã‚ˆã‚‹ Email/Password èªè¨¼</li>
            <li><span class="badge badge-success">âœ“</span> ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œï¼ˆçµ„ç¹”ã”ã¨ã«å®Œå…¨ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ï¼‰</li>
            <li><span class="badge badge-success">âœ“</span> å½¹å‰²ãƒ™ãƒ¼ã‚¹æ¨©é™ç®¡ç†
                <ul>
                    <li><code>Owner</code>: çµ„ç¹”ã‚ªãƒ¼ãƒŠãƒ¼ (å…¨æ¨©é™)</li>
                    <li><code>Admin</code>: ç®¡ç†è€… (ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†ã€è¨­å®šå¤‰æ›´)</li>
                    <li><code>Manager</code>: åº—é•· (åº—èˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†)</li>
                    <li><code>Staff</code>: ã‚¹ã‚¿ãƒƒãƒ• (æ—¥å ±å…¥åŠ›ã®ã¿)</li>
                </ul>
            </li>
            <li><span class="badge badge-success">âœ“</span> Row Level Security (RLS) ã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
        </ul>

        <h3>3.2 åº—èˆ—ãƒ»çµ„ç¹”ç®¡ç†</h3>
        <ul>
            <li>ãƒãƒ«ãƒã‚¹ãƒˆã‚¢å¯¾å¿œï¼ˆè¤‡æ•°åº—èˆ—ç®¡ç†ï¼‰</li>
            <li>çµ„ç¹”ç®¡ç†ï¼ˆçµ„ç¹”æƒ…å ±è¨­å®šã€ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ãƒ»å‰Šé™¤ã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ç®¡ç†ï¼‰</li>
            <li>åº—èˆ—ç®¡ç†ï¼ˆåº—èˆ—ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã€åº—é•·ã‚¢ã‚µã‚¤ãƒ³ã€åº—èˆ—åˆ¥æ¨©é™è¨­å®šï¼‰</li>
        </ul>

        <h3>3.3 æ—¥å ±ãƒ»ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†</h3>
        <ul>
            <li>æ—¥æ¬¡å ±å‘Šå…¥åŠ›ï¼ˆå£²ä¸Šã€ä»•å…¥ã‚Œã€å„ç¨®çµŒè²»ã€ãƒ†ã‚­ã‚¹ãƒˆå ±å‘Šï¼‰</li>
            <li>å£²ä¸Šè©³ç´°ï¼ˆç¾é‡‘/ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã€ç¨ç‡åˆ¥ï¼‰</li>
            <li>ä»•å…¥å…ˆåˆ¥å…¥åŠ›</li>
            <li>æœˆæ¬¡çµŒè²»å…¥åŠ›</li>
        </ul>

        <h3>3.4 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»åˆ†æ</h3>
        <ul>
            <li>3ã¤ã®æœŸé–“åˆ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆæ—¥æ¬¡ãƒ»é€±æ¬¡ãƒ»æœˆæ¬¡ï¼‰</li>
            <li>KPIè¡¨ç¤ºï¼ˆå£²ä¸Šé«˜ã€ç²—åˆ©ç›Šãƒ»ç²—åˆ©ç‡ã€å–¶æ¥­åˆ©ç›Šãƒ»å–¶æ¥­åˆ©ç›Šç‡ã€åŸä¾¡ç‡ã€äººä»¶è²»ç‡ã€ç›®æ¨™é”æˆç‡ï¼‰</li>
            <li>ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆ
                <ul>
                    <li>å£²ä¸Šæ¨ç§»ï¼ˆæ£’ã‚°ãƒ©ãƒ•ï¼‰</li>
                    <li>çµŒè²»æ¯”ç‡ï¼ˆå††ã‚°ãƒ©ãƒ•ï¼‰</li>
                    <li>åˆ©ç›Šã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«</li>
                    <li>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</li>
                </ul>
            </li>
            <li>åº—èˆ—æ¯”è¼ƒæ©Ÿèƒ½</li>
        </ul>

        <h3>3.5 ç›®æ¨™ç®¡ç†</h3>
        <ul>
            <li>æœˆæ¬¡ç›®æ¨™è¨­å®šï¼ˆç›®æ¨™å£²ä¸Šã€ç›®æ¨™åˆ©ç›Šã€ç›®æ¨™åˆ©ç›Šç‡ã€ç›®æ¨™åŸä¾¡ç‡ã€ç›®æ¨™äººä»¶è²»ç‡ï¼‰</li>
            <li>æ—¥æ¬¡ç›®æ¨™è¨­å®š</li>
            <li>ç›®æ¨™é”æˆçŠ¶æ³ã®å¯è¦–åŒ–</li>
        </ul>

        <h3>3.6 AIæ©Ÿèƒ½</h3>
        <ul>
            <li><span class="badge badge-primary">AI</span> AIãƒãƒ£ãƒƒãƒˆï¼ˆåº—èˆ—ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãè³ªå•å¿œç­”ã€éå»ã®ãƒãƒ£ãƒƒãƒˆå±¥æ­´ä¿å­˜ã€ä½¿ç”¨é‡åˆ¶é™ç®¡ç†ï¼‰</li>
            <li><span class="badge badge-primary">AI</span> AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆï¼ˆé€±æ¬¡ãƒ»æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šã€ãƒ¬ãƒãƒ¼ãƒˆå…±æœ‰æ©Ÿèƒ½ã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼‰</li>
            <li>AIä½¿ç”¨é‡ç®¡ç†ï¼ˆçµ„ç¹”ã”ã¨ã®æœˆæ¬¡åˆ¶é™ã€ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã€ä½¿ç”¨é‡è­¦å‘Šãƒ»åˆ¶é™ï¼‰</li>
        </ul>

        <h3>3.7 Google Sheetsé€£æº</h3>
        <ul>
            <li>ãƒ‡ãƒ¼ã‚¿åŒæœŸï¼ˆæ—¥å ±ãƒ‡ãƒ¼ã‚¿ã®Google Sheetså‡ºåŠ›ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸè¨­å®šï¼‰</li>
            <li>åŒæ–¹å‘é€£æºï¼ˆSheets â†’ DB ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€DB â†’ Sheets ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰</li>
        </ul>

        <h3>3.8 ç›£æŸ»ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h3>
        <ul>
            <li>ç›£æŸ»ãƒ­ã‚°ï¼ˆå…¨ã¦ã®é‡è¦æ“ä½œã‚’ãƒ­ã‚°è¨˜éŒ²ï¼‰</li>
            <li>åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ï¼ˆåˆ©ç”¨è¦ç´„åŒæ„ç®¡ç†ã€åŒæ„å±¥æ­´ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼‰</li>
        </ul>

        <hr>

        <h2 id="database">4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</h2>

        <h3>4.1 ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ« (27å€‹)</h3>

        <h4>çµ„ç¹”ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h4>
        <ol>
            <li><code>organizations</code> - çµ„ç¹”æƒ…å ±</li>
            <li><code>organization_members</code> - çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼é–¢é€£</li>
            <li><code>profiles</code> - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«</li>
            <li><code>organization_invitations</code> - çµ„ç¹”æ‹›å¾…</li>
        </ol>

        <h4>åº—èˆ—ç®¡ç†</h4>
        <ol start="5">
            <li><code>stores</code> - åº—èˆ—ãƒã‚¹ã‚¿</li>
            <li><code>store_assignments</code> - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»åº—èˆ—ã‚¢ã‚µã‚¤ãƒ³</li>
            <li><code>vendors</code> - ä»•å…¥å…ˆãƒã‚¹ã‚¿</li>
            <li><code>store_vendor_assignments</code> - åº—èˆ—ãƒ»ä»•å…¥å…ˆé–¢é€£</li>
        </ol>

        <h4>ãƒ¬ãƒãƒ¼ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿</h4>
        <ol start="9">
            <li><code>daily_reports</code> - æ—¥å ±</li>
            <li><code>daily_report_vendor_purchases</code> - æ—¥å ±ä»•å…¥å…ˆåˆ¥ãƒ‡ãƒ¼ã‚¿</li>
            <li><code>monthly_expenses</code> - æœˆæ¬¡çµŒè²»</li>
            <li><code>summary_data</code> - ã‚µãƒãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿</li>
        </ol>

        <h4>ç›®æ¨™ç®¡ç†</h4>
        <ol start="13">
            <li><code>targets</code> - æœˆæ¬¡ç›®æ¨™</li>
            <li><code>daily_targets</code> - æ—¥æ¬¡ç›®æ¨™</li>
            <li><code>expense_baselines</code> - çµŒè²»ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³</li>
        </ol>

        <h4>AIæ©Ÿèƒ½</h4>
        <ol start="16">
            <li><code>ai_conversations</code> - AIãƒãƒ£ãƒƒãƒˆä¼šè©±</li>
            <li><code>ai_messages</code> - AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</li>
            <li><code>ai_generated_reports</code> - AIç”Ÿæˆãƒ¬ãƒãƒ¼ãƒˆ</li>
            <li><code>report_schedules</code> - ãƒ¬ãƒãƒ¼ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</li>
            <li><code>ai_usage_settings</code> - AIä½¿ç”¨é‡è¨­å®š</li>
            <li><code>ai_usage_tracking</code> - AIä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</li>
            <li><code>report_generation_logs</code> - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ­ã‚°</li>
        </ol>

        <h4>ã‚·ã‚¹ãƒ†ãƒ </h4>
        <ol start="23">
            <li><code>audit_logs</code> - ç›£æŸ»ãƒ­ã‚°</li>
            <li><code>terms_acceptance</code> - åˆ©ç”¨è¦ç´„åŒæ„</li>
        </ol>

        <h3>4.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ (RLS)</h3>

        <div class="success-box">
            <strong>å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã§Row Level Securityæœ‰åŠ¹åŒ–</strong>
            <ul>
                <li>çµ„ç¹”é–“å®Œå…¨ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ï¼ˆ<code>organization_id</code> ã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰</li>
                <li>å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆSELECT/INSERT/UPDATE/DELETE ãƒãƒªã‚·ãƒ¼å€‹åˆ¥å®šç¾©ï¼‰</li>
                <li>ã‚»ã‚­ãƒ¥ã‚¢ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­è¨ˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¨ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦ã€å¿…è¦ãªæ¨©é™ã®ã¿è¨±å¯ï¼‰</li>
            </ul>
        </div>

        <h3>4.3 ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°</h3>
        <pre><code>-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çµ„ç¹”IDå–å¾—
get_user_organization_id() -> uuid

-- çµ„ç¹”ã‚ªãƒ¼ãƒŠãƒ¼åˆ¤å®š
is_organization_owner(org_id uuid) -> boolean

-- çµ„ç¹”ç®¡ç†è€…åˆ¤å®š
is_organization_admin(org_id uuid) -> boolean

-- ç®¡ç†è€…æ¨©é™åˆ¤å®š (profiles.role)
is_admin() -> boolean</code></pre>

        <hr>

        <h2 id="edge-functions">5. Supabase Edge Functions</h2>

        <h3>5.1 chat-gpt</h3>
        <ul>
            <li><strong>æ©Ÿèƒ½:</strong> ChatGPT APIã¨ã®çµ±åˆ</li>
            <li><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:</strong> <code>/functions/v1/chat-gpt</code></li>
            <li><strong>å…¥åŠ›:</strong> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ä¼šè©±å±¥æ­´</li>
            <li><strong>å‡ºåŠ›:</strong> AIå¿œç­”</li>
            <li><strong>èªè¨¼:</strong> å¿…è¦ (JWTæ¤œè¨¼)</li>
        </ul>

        <h3>5.2 generate-ai-report</h3>
        <ul>
            <li><strong>æ©Ÿèƒ½:</strong> AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ</li>
            <li><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:</strong> <code>/functions/v1/generate-ai-report</code></li>
            <li><strong>å‡¦ç†:</strong>
                <ol>
                    <li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰è©²å½“æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿å–å¾—</li>
                    <li>OpenAI API ã§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</li>
                    <li><code>ai_generated_reports</code> ã«ä¿å­˜</li>
                </ol>
            </li>
        </ul>

        <h3>5.3 scheduled-report-generator</h3>
        <ul>
            <li><strong>æ©Ÿèƒ½:</strong> ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šã«åŸºã¥ããƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ</li>
            <li><strong>ãƒˆãƒªã‚¬ãƒ¼:</strong> Cron (Supabase Scheduler)</li>
        </ul>

        <h3>5.4 send-report-email</h3>
        <ul>
            <li><strong>æ©Ÿèƒ½:</strong> ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡</li>
            <li><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:</strong> <code>/functions/v1/send-report-email</code></li>
        </ul>

        <h3>5.5 sync-to-sheets</h3>
        <ul>
            <li><strong>æ©Ÿèƒ½:</strong> ãƒ‡ãƒ¼ã‚¿ã‚’Google Sheetsã«åŒæœŸ</li>
            <li><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:</strong> <code>/functions/v1/sync-to-sheets</code></li>
        </ul>

        <div class="info-box">
            <strong>å…±é€šä»•æ§˜:</strong>
            <ul>
                <li>CORSå¯¾å¿œ: å…¨ã¦ã®Edge Functionã§å¿…é ˆãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š</li>
                <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: try-catchã§ãƒ©ãƒƒãƒ—</li>
                <li>ç’°å¢ƒå¤‰æ•°: è‡ªå‹•æ³¨å…¥ (SUPABASE_URL, SUPABASE_ANON_KEYç­‰)</li>
            </ul>
        </div>

        <hr>

        <h2 id="env-vars">6. ç’°å¢ƒå¤‰æ•°</h2>

        <h3>é–‹ç™ºç’°å¢ƒ (.env)</h3>
        <pre><code># Supabase
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
VITE_USE_SUPABASE=false  # false=ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã€true=æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰

# OpenAI (Edge Functionsç”¨ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¸è¦)
OPENAI_API_KEY=sk-...

# Google Sheets (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
VITE_GOOGLE_SHEETS_API_KEY=your-api-key
VITE_GOOGLE_SHEET_ID=your-sheet-id

# LINE Bot (æœªå®Ÿè£…)
LINE_CHANNEL_SECRET=your-secret
LINE_CHANNEL_ACCESS_TOKEN=your-token</code></pre>

        <div class="warning-box">
            <strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„:</strong>
            <ul>
                <li>ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ãƒ¼ãƒ«ã‚­ãƒ¼ã¯ <strong>çµ¶å¯¾ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«å«ã‚ãªã„</strong></li>
                <li>Edge Functionså†…ã§ã®ã¿ä½¿ç”¨</li>
                <li><code>.env</code> ãƒ•ã‚¡ã‚¤ãƒ«ã¯ <code>.gitignore</code> ã«å«ã‚ã‚‹</li>
            </ul>
        </div>

        <h3>ç’°å¢ƒå¤‰æ•°ä¸€è¦§</h3>
        <table>
            <thead>
                <tr>
                    <th>å¤‰æ•°å</th>
                    <th>å¿…é ˆ</th>
                    <th>èª¬æ˜</th>
                    <th>ä¾‹</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>VITE_SUPABASE_URL</code></td>
                    <td>âœ…</td>
                    <td>Supabase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURL</td>
                    <td><code>https://xxx.supabase.co</code></td>
                </tr>
                <tr>
                    <td><code>VITE_SUPABASE_ANON_KEY</code></td>
                    <td>âœ…</td>
                    <td>Supabase åŒ¿åã‚­ãƒ¼</td>
                    <td><code>eyJhbGciOi...</code></td>
                </tr>
                <tr>
                    <td><code>VITE_USE_SUPABASE</code></td>
                    <td>âœ…</td>
                    <td>æœ¬ç•ª/ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰</td>
                    <td><code>true</code> / <code>false</code></td>
                </tr>
                <tr>
                    <td><code>OPENAI_API_KEY</code></td>
                    <td>ğŸ”¶</td>
                    <td>OpenAI APIã‚­ãƒ¼ (Edge Functions)</td>
                    <td><code>sk-proj-...</code></td>
                </tr>
                <tr>
                    <td><code>VITE_GOOGLE_SHEETS_API_KEY</code></td>
                    <td>âšª</td>
                    <td>Google Sheets APIã‚­ãƒ¼</td>
                    <td><code>AIza...</code></td>
                </tr>
            </tbody>
        </table>
        <p><small>âœ… å¿…é ˆ / ğŸ”¶ AIæ©Ÿèƒ½ã«å¿…é ˆ / âšª ã‚ªãƒ—ã‚·ãƒ§ãƒ³</small></p>

        <hr>

        <h2 id="routing">7. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ </h2>

        <h3>å…¬é–‹ãƒšãƒ¼ã‚¸ (èªè¨¼ä¸è¦)</h3>
        <ul>
            <li><code>/login</code> - ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸</li>
            <li><code>/share/report/:shareToken</code> - å…±æœ‰ãƒ¬ãƒãƒ¼ãƒˆ</li>
            <li><code>/invite/:token</code> - çµ„ç¹”æ‹›å¾…å—è«¾</li>
            <li><code>/terms</code> - åˆ©ç”¨è¦ç´„</li>
            <li><code>/privacy</code> - ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</li>
        </ul>

        <h3>èªè¨¼æ¸ˆã¿ãƒšãƒ¼ã‚¸ (AuthGate)</h3>
        <ul>
            <li><code>/dashboard/daily</code> - æ—¥æ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</li>
            <li><code>/dashboard/weekly</code> - é€±æ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</li>
            <li><code>/dashboard/monthly</code> - æœˆæ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</li>
            <li><code>/targets</code> - ç›®æ¨™è¨­å®š</li>
            <li><code>/chat</code> - AIãƒãƒ£ãƒƒãƒˆ</li>
            <li><code>/ai-reports</code> - AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§</li>
            <li><code>/report/new</code> - æ–°è¦æ—¥å ±ä½œæˆ</li>
            <li><code>/expenses/monthly</code> - æœˆæ¬¡çµŒè²»å…¥åŠ›</li>
            <li><code>/staff</code> - ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç† (ç®¡ç†è€…ã®ã¿)</li>
            <li><code>/admin</code> - ç®¡ç†è€…è¨­å®š (ç®¡ç†è€…ã®ã¿)</li>
            <li><code>/organization</code> - çµ„ç¹”è¨­å®š (Owner/Adminã®ã¿)</li>
        </ul>

        <hr>

        <h2 id="deployment">8. é–‹ç™ºãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤</h2>

        <h3>é–‹ç™ºã‚³ãƒãƒ³ãƒ‰</h3>
        <pre><code># ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (ãƒãƒ¼ãƒˆ5173)
npm run dev

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰çµæœã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run preview</code></pre>

        <h3>ãƒ“ãƒ«ãƒ‰è¨­å®š</h3>
        <ul>
            <li><strong>ãƒãƒ³ãƒ‰ãƒ©ãƒ¼:</strong> Vite</li>
            <li><strong>ã‚³ãƒ¼ãƒ‰åœ§ç¸®:</strong> Terser (console.logé™¤å»)</li>
            <li><strong>ã‚³ãƒ¼ãƒ‰åˆ†å‰²:</strong>
                <ul>
                    <li><code>react-vendor</code> (React, React DOM, React Router)</li>
                    <li><code>chart-vendor</code> (Chart.js, Recharts)</li>
                    <li><code>ui-vendor</code> (Radix UI, Lucide React)</li>
                </ul>
            </li>
            <li><strong>è­¦å‘Šé–¾å€¤:</strong> 1000KB</li>
        </ul>

        <h3>ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•</h3>

        <h4>1. Netlify (æ¨å¥¨)</h4>
        <pre><code># netlify.toml è¨­å®šæ¸ˆã¿
# GitHubé€£æºã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤</code></pre>

        <h4>2. Vercel</h4>
        <pre><code># vercel.json è¨­å®šæ¸ˆã¿
# Vercel CLI ã¾ãŸã¯ GitHubé€£æº
vercel --prod</code></pre>

        <hr>

        <h2 id="data-flow">9. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h2>

        <h3>9.1 æ—¥å ±å…¥åŠ›ãƒ•ãƒ­ãƒ¼</h3>
        <div class="flow-diagram">
[ã‚¹ã‚¿ãƒƒãƒ•] â†’ ReportForm.tsx<br>
    â†“<br>
[ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼] â†’ TypeScriptå‹ãƒã‚§ãƒƒã‚¯<br>
    â†“<br>
[Supabase Insert] â†’ daily_reports ãƒ†ãƒ¼ãƒ–ãƒ«<br>
    â†“ (RLSè‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿: organization_id)<br>
[ä¿å­˜æˆåŠŸ] â†’ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«åæ˜ <br>
    â†“<br>
[ã‚ªãƒ—ã‚·ãƒ§ãƒ³] â†’ Google SheetsåŒæœŸ (sync-to-sheets)
        </div>

        <h3>9.2 AIãƒãƒ£ãƒƒãƒˆãƒ•ãƒ­ãƒ¼</h3>
        <div class="flow-diagram">
[ãƒ¦ãƒ¼ã‚¶ãƒ¼] â†’ AIChatPage.tsx â†’ AIChat.tsx<br>
    â†“<br>
[ä½¿ç”¨é‡ãƒã‚§ãƒƒã‚¯] â†’ useAIUsageLimit.ts<br>
    â†“ (åˆ¶é™OK)<br>
[Edge Function] â†’ chat-gpt (Supabase Function)<br>
    â†“<br>
[OpenAI API] â†’ ChatGPT-4 (gpt-4-turbo)<br>
    â†“<br>
[å¿œç­”å–å¾—] â†’ ai_messages ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜<br>
    â†“<br>
[UIæ›´æ–°] â†’ ãƒãƒ£ãƒƒãƒˆç”»é¢ã«è¡¨ç¤º<br>
    â†“<br>
[ä½¿ç”¨é‡è¨˜éŒ²] â†’ ai_usage_tracking ã«è¨˜éŒ²
        </div>

        <hr>

        <h2 id="state-management">10. çŠ¶æ…‹ç®¡ç†</h2>

        <h3>10.1 React Context</h3>
        <ol>
            <li><strong>AuthContext</strong> - èªè¨¼çŠ¶æ…‹ç®¡ç†ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</li>
            <li><strong>OrganizationContext</strong> - ç¾åœ¨ã®çµ„ç¹”æƒ…å ±ã€çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§ã€çµ„ç¹”åˆ‡ã‚Šæ›¿ãˆ</li>
            <li><strong>StoreContext</strong> - ç¾åœ¨é¸æŠä¸­ã®åº—èˆ—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªåº—èˆ—ä¸€è¦§</li>
            <li><strong>AdminDataContext</strong> - ç®¡ç†è€…ç”¨ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€åº—èˆ—ä¸€è¦§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ç­‰</li>
        </ol>

        <h3>10.2 ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯</h3>
        <ul>
            <li><code>useAIReports</code> - AIç”Ÿæˆãƒ¬ãƒãƒ¼ãƒˆç®¡ç†</li>
            <li><code>useAIUsageLimit</code> - AIä½¿ç”¨é‡åˆ¶é™ãƒã‚§ãƒƒã‚¯</li>
            <li><code>useChatArchive</code> - ãƒãƒ£ãƒƒãƒˆå±¥æ­´ç®¡ç†</li>
            <li><code>useDailyTarget</code> - æ—¥æ¬¡ç›®æ¨™å–å¾—ãƒ»æ›´æ–°</li>
            <li><code>useExpenseBaseline</code> - çµŒè²»ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³</li>
            <li><code>useKpis</code> - KPIè¨ˆç®—</li>
            <li><code>useReports</code> - æ—¥å ±ãƒ‡ãƒ¼ã‚¿å–å¾—</li>
            <li><code>useStores</code> - åº—èˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†</li>
            <li><code>useTargets</code> - ç›®æ¨™ãƒ‡ãƒ¼ã‚¿ç®¡ç†</li>
            <li><code>useUsageLimits</code> - ä½¿ç”¨é‡åˆ¶é™ç®¡ç†</li>
        </ul>

        <hr>

        <h2 id="security">11. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–</h2>

        <h3>11.1 èªè¨¼ãƒ»èªå¯</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> Supabase Auth (Email/Password)</li>
            <li><span class="badge badge-success">âœ“</span> JWT ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼</li>
            <li><span class="badge badge-success">âœ“</span> Row Level Security (RLS) ã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
            <li><span class="badge badge-success">âœ“</span> å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ (RBAC)</li>
            <li><span class="badge badge-success">âœ“</span> AuthGate ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã‚‹ä¿è­·</li>
        </ul>

        <h3>11.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> çµ„ç¹”é–“å®Œå…¨ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ (organization_id)</li>
            <li><span class="badge badge-success">âœ“</span> SQL Injection å¯¾ç­– (Supabase ORM)</li>
            <li><span class="badge badge-success">âœ“</span> XSS å¯¾ç­– (React ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¿è­·)</li>
            <li><span class="badge badge-success">âœ“</span> CSRF å¯¾ç­– (JWT ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼)</li>
        </ul>

        <h3>11.3 API ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> Edge Functions ã§ã® JWT æ¤œè¨¼</li>
            <li><span class="badge badge-success">âœ“</span> CORS ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š</li>
            <li><span class="badge badge-success">âœ“</span> Rate Limiting (ä½¿ç”¨é‡åˆ¶é™)</li>
            <li><span class="badge badge-success">âœ“</span> ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹ç§˜å¯†éµç®¡ç†</li>
        </ul>

        <h3>11.4 ç›£æŸ»</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> ç›£æŸ»ãƒ­ã‚°è¨˜éŒ² (audit_logs)</li>
            <li><span class="badge badge-success">âœ“</span> åˆ©ç”¨è¦ç´„åŒæ„ç®¡ç† (terms_acceptance)</li>
            <li><span class="badge badge-success">âœ“</span> AI ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</li>
        </ul>

        <h3>11.5 æœªå®Ÿè£…ãƒ»æ¨å¥¨å¯¾ç­–</h3>
        <ul>
            <li><span class="badge badge-warning">âš ï¸</span> Two-Factor Authentication (2FA)</li>
            <li><span class="badge badge-warning">âš ï¸</span> ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¤‡é›‘åº¦ãƒãƒªã‚·ãƒ¼</li>
            <li><span class="badge badge-warning">âš ï¸</span> IPåˆ¶é™ãƒ»Geo-Blocking</li>
            <li><span class="badge badge-warning">âš ï¸</span> HTTPS è¨¼æ˜æ›¸ (ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒä¾å­˜)</li>
            <li><span class="badge badge-warning">âš ï¸</span> WAF (Web Application Firewall)</li>
        </ul>

        <hr>

        <h2 id="performance">12. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</h2>

        <h3>12.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> ã‚³ãƒ¼ãƒ‰åˆ†å‰² (react-vendor, chart-vendor, ui-vendor)</li>
            <li><span class="badge badge-success">âœ“</span> Terser ã«ã‚ˆã‚‹åœ§ç¸®ãƒ»æœ€é©åŒ–</li>
            <li><span class="badge badge-success">âœ“</span> Tree Shaking (Vite)</li>
            <li><span class="badge badge-success">âœ“</span> CSS-in-JS æœ€é©åŒ– (Tailwind CSS)</li>
        </ul>

        <h3>12.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ (organization_id, store_id, dateç­‰)</li>
            <li><span class="badge badge-success">âœ“</span> è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š)</li>
        </ul>

        <h3>12.3 API</h3>
        <ul>
            <li><span class="badge badge-success">âœ“</span> Edge Functions (ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·)</li>
            <li><span class="badge badge-warning">âš ï¸</span> ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° (React Queryæœªä½¿ç”¨ - æ¤œè¨ä½™åœ°)</li>
        </ul>

        <hr>

        <h2 id="testing">13. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ (æœªå®Ÿè£…)</h2>

        <h3>æ¨å¥¨ãƒ†ã‚¹ãƒˆæ§‹æˆ</h3>
        <pre><code>tests/
â”œâ”€â”€ unit/                # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ utils/          # è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ services/       # APIå‘¼ã³å‡ºã—
â”‚   â””â”€â”€ hooks/          # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ integration/         # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ api/            # Edge Functions
â”œâ”€â”€ e2e/                # E2Eãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ auth.spec.ts    # èªè¨¼ãƒ•ãƒ­ãƒ¼
â”‚   â”œâ”€â”€ report.spec.ts  # æ—¥å ±å…¥åŠ›
â”‚   â””â”€â”€ dashboard.spec.ts # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â””â”€â”€ fixtures/            # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿</code></pre>

        <h3>æ¨å¥¨ãƒ„ãƒ¼ãƒ«</h3>
        <ul>
            <li><strong>ãƒ¦ãƒ‹ãƒƒãƒˆ/çµ±åˆ:</strong> Vitest</li>
            <li><strong>E2E:</strong> Playwright / Cypress</li>
            <li><strong>ã‚«ãƒãƒ¬ãƒƒã‚¸:</strong> Istanbul (c8)</li>
        </ul>

        <hr>

        <h2 id="roadmap">14. ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»</h2>

        <h3>14.1 çŸ­æœŸ (1-3ãƒ¶æœˆ)</h3>
        <ul>
            <li>LINE Bot å®Ÿè£… (æ—¥å ±ã®LINEå…¥åŠ›)</li>
            <li>ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª (React Native / PWA)</li>
            <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥æ©Ÿèƒ½</li>
            <li>ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (CSV/Excel)</li>
            <li>ãƒ†ã‚¹ãƒˆå®Ÿè£… (Unit/E2E)</li>
        </ul>

        <h3>14.2 ä¸­æœŸ (3-6ãƒ¶æœˆ)</h3>
        <ul>
            <li>åœ¨åº«ç®¡ç†æ©Ÿèƒ½</li>
            <li>ã‚·ãƒ•ãƒˆç®¡ç†æ©Ÿèƒ½</li>
            <li>è«‹æ±‚æ›¸ç®¡ç†</li>
            <li>Stripeçµ±åˆ (ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ±ºæ¸ˆ)</li>
            <li>å¤šè¨€èªå¯¾å¿œ (i18n)</li>
        </ul>

        <h3>14.3 é•·æœŸ (6ãƒ¶æœˆä»¥ä¸Š)</h3>
        <ul>
            <li>äºˆæ¸¬åˆ†æ (AIå£²ä¸Šäºˆæ¸¬)</li>
            <li>è¤‡æ•°çµ„ç¹”åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½</li>
            <li>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£é€£æº (POSã€ä¼šè¨ˆã‚½ãƒ•ãƒˆç­‰)</li>
            <li>ãƒ›ãƒ¯ã‚¤ãƒˆãƒ©ãƒ™ãƒ«å¯¾å¿œ</li>
            <li>ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ç‰ˆæä¾›</li>
        </ul>

        <hr>

        <h2 id="troubleshooting">15. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

        <h3>ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–</h3>

        <h4>1. èªè¨¼ã‚¨ãƒ©ãƒ¼: "Invalid token"</h4>
        <p><strong>åŸå› :</strong> JWT ãƒˆãƒ¼ã‚¯ãƒ³æœŸé™åˆ‡ã‚Œã€ã¾ãŸã¯ä¸æ­£ãªãƒˆãƒ¼ã‚¯ãƒ³</p>
        <p><strong>è§£æ±º:</strong></p>
        <pre><code>// å¼·åˆ¶ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ â†’ å†ãƒ­ã‚°ã‚¤ãƒ³
await supabase.auth.signOut()</code></pre>

        <h4>2. RLS ã‚¨ãƒ©ãƒ¼: "new row violates row-level security policy"</h4>
        <p><strong>åŸå› :</strong> organization_id ãŒ NULLã€ã¾ãŸã¯æ¨©é™ä¸è¶³</p>
        <p><strong>è§£æ±º:</strong></p>
        <pre><code>-- organization_id ã‚’è‡ªå‹•è¨­å®šã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ç¢ºèª
SELECT * FROM pg_trigger WHERE tgname LIKE '%org%';

-- æ‰‹å‹•è¨­å®š
UPDATE profiles SET organization_id = 'your-org-id' WHERE id = 'user-id';</code></pre>

        <h4>3. Edge Function ã‚¨ãƒ©ãƒ¼: "Function not found"</h4>
        <p><strong>åŸå› :</strong> Edge Function ãŒæœªãƒ‡ãƒ—ãƒ­ã‚¤</p>
        <p><strong>è§£æ±º:</strong></p>
        <pre><code>supabase functions deploy chat-gpt</code></pre>

        <h4>4. ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„</h4>
        <p><strong>åŸå› :</strong> ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰/æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰è¨­å®šãƒŸã‚¹</p>
        <p><strong>è§£æ±º:</strong></p>
        <pre><code># .env ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
VITE_USE_SUPABASE=true  # æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
VITE_USE_SUPABASE=false # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨</code></pre>

        <hr>

        <h2 id="monitoring">16. ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹</h2>

        <h3>æ¨å¥¨ç›£è¦–é …ç›®</h3>
        <ol>
            <li><strong>ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡</strong> - Uptime (99.9% ç›®æ¨™)ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ  (&lt;200ms)</li>
            <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹</strong> - DAU/MAUã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“ã€é›¢è„±ç‡</li>
            <li><strong>ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹</strong> - æ—¥å ±å…¥åŠ›ç‡ã€AIä½¿ç”¨ç‡ã€ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå›æ•°ã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç¶™ç¶šç‡</li>
            <li><strong>ã‚¨ãƒ©ãƒ¼ç›£è¦–</strong> - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ã€500ã‚¨ãƒ©ãƒ¼ä»¶æ•°ã€èªè¨¼å¤±æ•—å›æ•°</li>
        </ol>

        <h3>æ¨å¥¨ãƒ„ãƒ¼ãƒ«</h3>
        <ul>
            <li><strong>Sentry</strong> - ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</li>
            <li><strong>Google Analytics / Mixpanel</strong> - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ</li>
            <li><strong>Supabase Dashboard</strong> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›£è¦–</li>
            <li><strong>Vercel/Netlify Analytics</strong> - ãƒ‡ãƒ—ãƒ­ã‚¤ç›£è¦–</li>
        </ul>

        <hr>

        <h2 id="license">17. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»åˆ©ç”¨è¦ç´„</h2>

        <h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹</h3>
        <ul>
            <li><strong>Private</strong> (éå…¬é–‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)</li>
            <li>å•†ç”¨åˆ©ç”¨å¯èƒ½ (çµ„ç¹”å†…)</li>
        </ul>

        <h3>ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ©ã‚¤ã‚»ãƒ³ã‚¹</h3>
        <ul>
            <li><strong>React, React Router:</strong> MIT License</li>
            <li><strong>Supabase:</strong> Apache 2.0 License</li>
            <li><strong>Tailwind CSS:</strong> MIT License</li>
            <li><strong>Chart.js, Recharts:</strong> MIT License</li>
            <li><strong>Radix UI:</strong> MIT License</li>
            <li><strong>Lucide React:</strong> ISC License</li>
        </ul>

        <hr>

        <h2 id="contact">18. é€£çµ¡å…ˆãƒ»ã‚µãƒãƒ¼ãƒˆ</h2>

        <h3>é–‹ç™ºãƒãƒ¼ãƒ </h3>
        <ul>
            <li><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…:</strong> (æœªè¨­å®š)</li>
            <li><strong>æŠ€è¡“ãƒªãƒ¼ãƒ‰:</strong> (æœªè¨­å®š)</li>
        </ul>

        <h3>ã‚µãƒãƒ¼ãƒˆãƒãƒ£ãƒãƒ«</h3>
        <ul>
            <li><strong>ãƒ¡ãƒ¼ãƒ«:</strong> support@example.com (æœªè¨­å®š)</li>
            <li><strong>Slack/Discord:</strong> (æœªè¨­å®š)</li>
            <li><strong>GitHub Issues:</strong> (æœªè¨­å®š)</li>
        </ul>

        <h3>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h3>
        <ul>
            <li><strong>æœ¬ãƒ•ã‚¡ã‚¤ãƒ«:</strong> <code>SYSTEM_OVERVIEW.md</code></li>
            <li><strong>ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆ:</strong> <code>MULTITENANT_ARCHITECTURE.md</code></li>
            <li><strong>ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰:</strong> <code>PRODUCTION_DEPLOY.md</code></li>
            <li><strong>APIè¨­å®š:</strong> <code>OPENAI_SETUP.md</code>, <code>GOOGLE_SHEETS_SETUP.md</code></li>
        </ul>

        <hr>

        <h2 id="changelog">19. å¤‰æ›´å±¥æ­´</h2>

        <table>
            <thead>
                <tr>
                    <th>æ—¥ä»˜</th>
                    <th>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</th>
                    <th>å¤‰æ›´å†…å®¹</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>2025-10-24</td>
                    <td>1.0.0</td>
                    <td>åˆç‰ˆä½œæˆ - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ¦‚è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <div class="info-box">
            <p><strong>ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç†è§£ã¨é‹ç”¨ã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚</strong></p>
            <p><strong>è³ªå•ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚</strong></p>
        </div>

        <footer style="margin-top: 60px; padding-top: 20px; border-top: 2px solid #e5e7eb; text-align: center; color: #6b7280;">
            <p>AI Management System - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ¦‚è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ v1.0.0</p>
            <p>Generated: 2025-10-24</p>
        </footer>
    </div>
</body>
</html>
