# ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ¦‚è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå:** AI Management System
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 0.0.0
**ã‚¿ã‚¤ãƒ—:** é£²é£Ÿãƒã‚§ãƒ¼ãƒ³å‘ã‘çµŒå–¶ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œï¼‰
**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹:** `/tmp/cc-agent/57978924/project`

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React** 18.3.1 - UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript** 5.5.3 - å‹å®‰å…¨ãªé–‹ç™º
- **Vite** 5.4.2 - é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«
- **React Router DOM** 6.28.0 - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **Tailwind CSS** 3.4.1 - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS

### UIãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³
- **Radix UI** - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - Dropdown Menu, Progress, Slot, Tabs
- **Lucide React** 0.544.0 - ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **Class Variance Authority** - æ¡ä»¶ä»˜ãã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **clsx / tailwind-merge** - ã‚¯ãƒ©ã‚¹åçµåˆ

### ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–
- **Chart.js** 4.5.0 + **react-chartjs-2** 5.3.0
- **Recharts** 3.2.0
- **TanStack React Table** 8.20.5 - é«˜æ©Ÿèƒ½ãƒ†ãƒ¼ãƒ–ãƒ«

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©
- **Supabase** - BaaS (Backend as a Service)
  - èªè¨¼ (Email/Password)
  - PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - Row Level Security (RLS)
  - Edge Functions (Deno)
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
- **Supabase Client** 2.39.3

### å¤–éƒ¨APIé€£æº
- **OpenAI API** - AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- **Google Sheets API** - ãƒ‡ãƒ¼ã‚¿åŒæœŸãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- **LINE Messaging API** - LINE Botï¼ˆæœªå®Ÿè£…ï¼‰

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- **date-fns** 4.1.0 - æ—¥ä»˜æ“ä½œ
- **Terser** 5.44.0 - ã‚³ãƒ¼ãƒ‰åœ§ç¸®

---

## 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
project/
â”œâ”€â”€ src/                          # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ components/               # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (68ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ Admin/               # ç®¡ç†è€…æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ Auth/                # èªè¨¼UI
â”‚   â”‚   â”œâ”€â”€ Charts/              # ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Chat/                # AIãƒãƒ£ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ Dashboard/           # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ Organization/        # çµ„ç¹”ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Reports/             # ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Stores/              # åº—èˆ—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Tables/              # ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ Usage/               # ä½¿ç”¨é‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ alerts/              # ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ analysis/            # åˆ†ææ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ auth/                # èªè¨¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ charts/              # ãƒãƒ£ãƒ¼ãƒˆè©³ç´°
â”‚   â”‚   â”œâ”€â”€ data/                # ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”‚   â”œâ”€â”€ layout/              # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ system/              # ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½
â”‚   â”‚   â””â”€â”€ ui/                  # å†åˆ©ç”¨å¯èƒ½ãªUIéƒ¨å“
â”‚   â”œâ”€â”€ contexts/                # React Context (4ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ AdminDataContext.tsx
â”‚   â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚   â”‚   â”œâ”€â”€ OrganizationContext.tsx
â”‚   â”‚   â””â”€â”€ StoreContext.tsx
â”‚   â”œâ”€â”€ hooks/                   # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (10ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ useAIReports.ts
â”‚   â”‚   â”œâ”€â”€ useAIUsageLimit.ts
â”‚   â”‚   â”œâ”€â”€ useChatArchive.ts
â”‚   â”‚   â”œâ”€â”€ useDailyTarget.ts
â”‚   â”‚   â”œâ”€â”€ useExpenseBaseline.ts
â”‚   â”‚   â”œâ”€â”€ useKpis.ts
â”‚   â”‚   â”œâ”€â”€ useReports.ts
â”‚   â”‚   â”œâ”€â”€ useStores.ts
â”‚   â”‚   â”œâ”€â”€ useTargets.ts
â”‚   â”‚   â””â”€â”€ useUsageLimits.ts
â”‚   â”œâ”€â”€ layout/                  # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (3ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx
â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ lib/                     # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (6ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ errorMessages.ts     # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å®šç¾©
â”‚   â”‚   â”œâ”€â”€ format.ts            # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
â”‚   â”‚   â”œâ”€â”€ mock.ts              # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ organizationHelper.ts # çµ„ç¹”ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”‚   â”œâ”€â”€ supabase.ts          # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ utils.ts             # æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ pages/                   # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (14ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ AIChatPage.tsx
â”‚   â”‚   â”œâ”€â”€ AIReportsPage.tsx
â”‚   â”‚   â”œâ”€â”€ AdminSettings.tsx
â”‚   â”‚   â”œâ”€â”€ DashboardDaily.tsx
â”‚   â”‚   â”œâ”€â”€ DashboardMonthly.tsx
â”‚   â”‚   â”œâ”€â”€ DashboardWeekly.tsx
â”‚   â”‚   â”œâ”€â”€ InvitationAccept.tsx
â”‚   â”‚   â”œâ”€â”€ MonthlyExpenseForm.tsx
â”‚   â”‚   â”œâ”€â”€ OrganizationSettings.tsx
â”‚   â”‚   â”œâ”€â”€ PrivacyPolicy.tsx
â”‚   â”‚   â”œâ”€â”€ ReportForm.tsx
â”‚   â”‚   â”œâ”€â”€ SharedReport.tsx
â”‚   â”‚   â”œâ”€â”€ StaffManagement.tsx
â”‚   â”‚   â”œâ”€â”€ Targets.tsx
â”‚   â”‚   â””â”€â”€ TermsOfService.tsx
â”‚   â”œâ”€â”€ services/                # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»API (8ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ api.ts               # APIçµ±åˆ
â”‚   â”‚   â”œâ”€â”€ auditLog.ts          # ç›£æŸ»ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ chatArchive.ts       # ãƒãƒ£ãƒƒãƒˆå±¥æ­´
â”‚   â”‚   â”œâ”€â”€ googleSheets.ts      # Google Sheetsé€£æº
â”‚   â”‚   â”œâ”€â”€ organizationService.ts # çµ„ç¹”ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ sampleData.ts        # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ supabase.ts          # Supabaseæ“ä½œ
â”‚   â”‚   â””â”€â”€ usageLimits.ts       # ä½¿ç”¨åˆ¶é™ç®¡ç†
â”‚   â”œâ”€â”€ types/                   # TypeScriptå‹å®šç¾© (1ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â””â”€â”€ index.ts             # å…¨å‹å®šç¾©
â”‚   â”œâ”€â”€ utils/                   # è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ (1ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â””â”€â”€ calculations.ts      # KPIè¨ˆç®—ç­‰
â”‚   â”œâ”€â”€ App.tsx                  # ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ main.tsx                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ index.css                # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚
â”œâ”€â”€ supabase/                    # Supabaseãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ functions/               # Edge Functions (5å€‹)
â”‚   â”‚   â”œâ”€â”€ chat-gpt/           # ChatGPT APIçµ±åˆ
â”‚   â”‚   â”œâ”€â”€ generate-ai-report/ # AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ scheduled-report-generator/ # ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ send-report-email/  # ãƒ¬ãƒãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡
â”‚   â”‚   â””â”€â”€ sync-to-sheets/     # Google SheetsåŒæœŸ
â”‚   â””â”€â”€ migrations/              # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (53ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚       â””â”€â”€ *.sql                # DDL/DML (åˆè¨ˆ7,254è¡Œ)
â”‚
â”œâ”€â”€ api/                         # Python API (æœªä½¿ç”¨ãƒ»ãƒ¬ã‚¬ã‚·ãƒ¼)
â”‚   â””â”€â”€ main.py
â”‚
â”œâ”€â”€ scripts/                     # é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ verify-production.sh    # æœ¬ç•ªæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ public/                      # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ dist/                        # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”‚
â”œâ”€â”€ .env                         # ç’°å¢ƒå¤‰æ•° (é–‹ç™ºç”¨)
â”œâ”€â”€ .env.example                 # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ .env.production.example      # æœ¬ç•ªç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚
â”œâ”€â”€ package.json                 # ä¾å­˜é–¢ä¿‚å®šç¾©
â”œâ”€â”€ tsconfig.json                # TypeScriptè¨­å®š
â”œâ”€â”€ vite.config.ts               # Viteè¨­å®š
â”œâ”€â”€ tailwind.config.js           # Tailwind CSSè¨­å®š
â”œâ”€â”€ postcss.config.js            # PostCSSè¨­å®š
â”œâ”€â”€ eslint.config.js             # ESLintè¨­å®š
â”‚
â””â”€â”€ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ/ (16ãƒ•ã‚¡ã‚¤ãƒ«)
    â”œâ”€â”€ README.md                        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
    â”œâ”€â”€ MULTITENANT_ARCHITECTURE.md      # ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆ
    â”œâ”€â”€ PRODUCTION_DEPLOY.md             # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
    â”œâ”€â”€ DEPLOYMENT_CHECKLIST.md          # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
    â”œâ”€â”€ PRODUCTION_DEPLOYMENT.md         # æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤è©³ç´°
    â”œâ”€â”€ QUICK_START_DEPLOYMENT.md        # ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
    â”œâ”€â”€ PRODUCTION_READINESS_REPORT.md   # æœ¬ç•ªæº–å‚™ãƒ¬ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ PRODUCTION_BLOCKER_FIXES.md      # æœ¬ç•ªé˜»å®³è¦å› å¯¾å¿œ
    â”œâ”€â”€ CRITICAL_FIXES_APPLIED.md        # é‡è¦ä¿®æ­£å±¥æ­´
    â”œâ”€â”€ DEMO_TO_PRODUCTION_GUIDE.md      # ãƒ‡ãƒ¢â†’æœ¬ç•ªç§»è¡Œã‚¬ã‚¤ãƒ‰
    â”œâ”€â”€ PRODUCTION_SETUP_SQL.md          # æœ¬ç•ªSQLè¨­å®š
    â”œâ”€â”€ SYSTEM_VERIFICATION.md           # ã‚·ã‚¹ãƒ†ãƒ æ¤œè¨¼
    â”œâ”€â”€ OPENAI_SETUP.md                  # OpenAI APIè¨­å®š
    â”œâ”€â”€ CHATGPT_SETUP.md                 # ChatGPTè¨­å®š
    â”œâ”€â”€ GOOGLE_SHEETS_SETUP.md           # Google Sheetsè¨­å®š
    â””â”€â”€ EXPORT_PROJECT.md                # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
```

**çµ±è¨ˆ:**
- TypeScript/TSXãƒ•ã‚¡ã‚¤ãƒ«: 122å€‹
- Supabaseãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 53ãƒ•ã‚¡ã‚¤ãƒ« (7,254è¡Œ)
- Edge Functions: 5å€‹

---

## 3. ä¸»è¦æ©Ÿèƒ½

### 3.1 èªè¨¼ãƒ»æ¨©é™ç®¡ç†
- **Supabase Auth** ã«ã‚ˆã‚‹ Email/Password èªè¨¼
- **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ** (çµ„ç¹”ã”ã¨ã«å®Œå…¨ãƒ‡ãƒ¼ã‚¿åˆ†é›¢)
- **å½¹å‰²ãƒ™ãƒ¼ã‚¹æ¨©é™ç®¡ç†**
  - `Owner`: çµ„ç¹”ã‚ªãƒ¼ãƒŠãƒ¼ (å…¨æ¨©é™)
  - `Admin`: ç®¡ç†è€… (ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†ã€è¨­å®šå¤‰æ›´)
  - `Manager`: åº—é•· (åº—èˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†)
  - `Staff`: ã‚¹ã‚¿ãƒƒãƒ• (æ—¥å ±å…¥åŠ›ã®ã¿)
- **Row Level Security (RLS)** ã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### 3.2 åº—èˆ—ãƒ»çµ„ç¹”ç®¡ç†
- **ãƒãƒ«ãƒã‚¹ãƒˆã‚¢å¯¾å¿œ** (è¤‡æ•°åº—èˆ—ç®¡ç†)
- **çµ„ç¹”ç®¡ç†**
  - çµ„ç¹”æƒ…å ±è¨­å®š
  - ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ãƒ»å‰Šé™¤
  - ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ç®¡ç†
- **åº—èˆ—ç®¡ç†**
  - åº—èˆ—ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
  - åº—é•·ã‚¢ã‚µã‚¤ãƒ³
  - åº—èˆ—åˆ¥æ¨©é™è¨­å®š

### 3.3 æ—¥å ±ãƒ»ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†
- **æ—¥æ¬¡å ±å‘Šå…¥åŠ›**
  - å£²ä¸Š (ç¾é‡‘/ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã€ç¨ç‡åˆ¥)
  - ä»•å…¥ã‚Œ (ä»•å…¥å…ˆåˆ¥)
  - å„ç¨®çµŒè²» (äººä»¶è²»ã€æ°´å…‰ç†±è²»ã€è³ƒæ–™ã€æ¶ˆè€—å“ç­‰)
  - ãƒ†ã‚­ã‚¹ãƒˆå ±å‘Š
- **æœˆæ¬¡çµŒè²»å…¥åŠ›**
  - å›ºå®šè²»ã®æœˆæ¬¡å…¥åŠ›
- **ä»•å…¥å…ˆç®¡ç†**
  - ã‚«ãƒ†ã‚´ãƒªåˆ¥ä»•å…¥å…ˆç™»éŒ²
  - åº—èˆ—åˆ¥ä»•å…¥å…ˆã‚¢ã‚µã‚¤ãƒ³

### 3.4 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»åˆ†æ
- **3ã¤ã®æœŸé–“åˆ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
  - æ—¥æ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  - é€±æ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  - æœˆæ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **KPIè¡¨ç¤º**
  - å£²ä¸Šé«˜
  - ç²—åˆ©ç›Šãƒ»ç²—åˆ©ç‡
  - å–¶æ¥­åˆ©ç›Šãƒ»å–¶æ¥­åˆ©ç›Šç‡
  - åŸä¾¡ç‡
  - äººä»¶è²»ç‡
  - ç›®æ¨™é”æˆç‡
- **ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆ**
  - å£²ä¸Šæ¨ç§» (æ£’ã‚°ãƒ©ãƒ•)
  - çµŒè²»æ¯”ç‡ (å††ã‚°ãƒ©ãƒ•)
  - åˆ©ç›Šã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«
  - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—
- **åº—èˆ—æ¯”è¼ƒæ©Ÿèƒ½**
  - åº—èˆ—é–“ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ

### 3.5 ç›®æ¨™ç®¡ç†
- **æœˆæ¬¡ç›®æ¨™è¨­å®š**
  - ç›®æ¨™å£²ä¸Š
  - ç›®æ¨™åˆ©ç›Š
  - ç›®æ¨™åˆ©ç›Šç‡
  - ç›®æ¨™åŸä¾¡ç‡
  - ç›®æ¨™äººä»¶è²»ç‡
- **æ—¥æ¬¡ç›®æ¨™è¨­å®š**
  - æ—¥åˆ¥å£²ä¸Šç›®æ¨™
- **ç›®æ¨™é”æˆçŠ¶æ³ã®å¯è¦–åŒ–**
  - é”æˆç‡è¡¨ç¤º
  - é€²æ—ãƒãƒƒã‚¸

### 3.6 AIæ©Ÿèƒ½
- **AIãƒãƒ£ãƒƒãƒˆ**
  - åº—èˆ—ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãè³ªå•å¿œç­”
  - éå»ã®ãƒãƒ£ãƒƒãƒˆå±¥æ­´ä¿å­˜
  - ä½¿ç”¨é‡åˆ¶é™ç®¡ç†
- **AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ**
  - é€±æ¬¡ãƒ»æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ä½œæˆ
  - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
  - ãƒ¬ãƒãƒ¼ãƒˆå…±æœ‰æ©Ÿèƒ½ (å…¬é–‹URL)
  - ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½
- **AIä½¿ç”¨é‡ç®¡ç†**
  - çµ„ç¹”ã”ã¨ã®æœˆæ¬¡åˆ¶é™
  - ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
  - ä½¿ç”¨é‡è­¦å‘Šãƒ»åˆ¶é™

### 3.7 Google Sheetsé€£æº
- **ãƒ‡ãƒ¼ã‚¿åŒæœŸ**
  - æ—¥å ±ãƒ‡ãƒ¼ã‚¿ã®Google Sheetså‡ºåŠ›
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸè¨­å®š
- **åŒæ–¹å‘é€£æº**
  - Sheets â†’ DB ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
  - DB â†’ Sheets ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### 3.8 ç›£æŸ»ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **ç›£æŸ»ãƒ­ã‚°**
  - å…¨ã¦ã®é‡è¦æ“ä½œã‚’ãƒ­ã‚°è¨˜éŒ²
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨˜éŒ²
- **åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼**
  - åˆ©ç”¨è¦ç´„åŒæ„ç®¡ç†
  - åŒæ„å±¥æ­´ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 4.1 ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ« (27å€‹)

#### çµ„ç¹”ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
1. **`organizations`** - çµ„ç¹”æƒ…å ±
2. **`organization_members`** - çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼é–¢é€£
3. **`profiles`** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
4. **`organization_invitations`** - çµ„ç¹”æ‹›å¾…

#### åº—èˆ—ç®¡ç†
5. **`stores`** - åº—èˆ—ãƒã‚¹ã‚¿
6. **`store_assignments`** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»åº—èˆ—ã‚¢ã‚µã‚¤ãƒ³
7. **`vendors`** - ä»•å…¥å…ˆãƒã‚¹ã‚¿
8. **`store_vendor_assignments`** - åº—èˆ—ãƒ»ä»•å…¥å…ˆé–¢é€£

#### ãƒ¬ãƒãƒ¼ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿
9. **`daily_reports`** - æ—¥å ±
10. **`daily_report_vendor_purchases`** - æ—¥å ±ä»•å…¥å…ˆåˆ¥ãƒ‡ãƒ¼ã‚¿
11. **`monthly_expenses`** - æœˆæ¬¡çµŒè²»
12. **`summary_data`** - ã‚µãƒãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿

#### ç›®æ¨™ç®¡ç†
13. **`targets`** - æœˆæ¬¡ç›®æ¨™
14. **`daily_targets`** - æ—¥æ¬¡ç›®æ¨™
15. **`expense_baselines`** - çµŒè²»ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³

#### AIæ©Ÿèƒ½
16. **`ai_conversations`** - AIãƒãƒ£ãƒƒãƒˆä¼šè©±
17. **`ai_messages`** - AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
18. **`ai_generated_reports`** - AIç”Ÿæˆãƒ¬ãƒãƒ¼ãƒˆ
19. **`report_schedules`** - ãƒ¬ãƒãƒ¼ãƒˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
20. **`ai_usage_settings`** - AIä½¿ç”¨é‡è¨­å®š
21. **`ai_usage_tracking`** - AIä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
22. **`report_generation_logs`** - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ­ã‚°

#### ã‚·ã‚¹ãƒ†ãƒ 
23. **`audit_logs`** - ç›£æŸ»ãƒ­ã‚°
24. **`terms_acceptance`** - åˆ©ç”¨è¦ç´„åŒæ„

### 4.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ (RLS)

**å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã§Row Level Securityæœ‰åŠ¹åŒ–**

- **çµ„ç¹”é–“å®Œå…¨ãƒ‡ãƒ¼ã‚¿åˆ†é›¢**
  - `organization_id` ã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  - ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã§ç¾åœ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çµ„ç¹”IDå–å¾—
- **å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**
  - SELECT/INSERT/UPDATE/DELETE ãƒãƒªã‚·ãƒ¼å€‹åˆ¥å®šç¾©
  - ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯é–¢æ•°
- **ã‚»ã‚­ãƒ¥ã‚¢ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­è¨ˆ**
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¨ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦
  - å¿…è¦ãªæ¨©é™ã®ã¿æ˜ç¤ºçš„ã«è¨±å¯

### 4.3 ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çµ„ç¹”IDå–å¾—
get_user_organization_id() -> uuid

-- çµ„ç¹”ã‚ªãƒ¼ãƒŠãƒ¼åˆ¤å®š
is_organization_owner(org_id uuid) -> boolean

-- çµ„ç¹”ç®¡ç†è€…åˆ¤å®š
is_organization_admin(org_id uuid) -> boolean

-- ç®¡ç†è€…æ¨©é™åˆ¤å®š (profiles.role)
is_admin() -> boolean
```

---

## 5. Supabase Edge Functions

### 5.1 `chat-gpt`
- **æ©Ÿèƒ½:** ChatGPT APIã¨ã®çµ±åˆ
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:** `/functions/v1/chat-gpt`
- **å…¥åŠ›:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ä¼šè©±å±¥æ­´
- **å‡ºåŠ›:** AIå¿œç­”
- **èªè¨¼:** å¿…è¦ (JWTæ¤œè¨¼)

### 5.2 `generate-ai-report`
- **æ©Ÿèƒ½:** AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:** `/functions/v1/generate-ai-report`
- **å…¥åŠ›:** åº—èˆ—IDã€æœŸé–“ã€ãƒ¬ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—
- **å‡ºåŠ›:** ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆ (JSON)
- **å‡¦ç†:**
  1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰è©²å½“æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
  2. OpenAI API ã§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
  3. `ai_generated_reports` ã«ä¿å­˜

### 5.3 `scheduled-report-generator`
- **æ©Ÿèƒ½:** ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šã«åŸºã¥ããƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
- **ãƒˆãƒªã‚¬ãƒ¼:** Cron (Supabase Scheduler)
- **å‡¦ç†:**
  1. `report_schedules` ã‹ã‚‰å®Ÿè¡Œå¯¾è±¡ã‚’å–å¾—
  2. `generate-ai-report` ã‚’å‘¼ã³å‡ºã—
  3. ç”Ÿæˆçµæœã‚’ãƒ­ã‚°ã«è¨˜éŒ²

### 5.4 `send-report-email`
- **æ©Ÿèƒ½:** ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:** `/functions/v1/send-report-email`
- **å…¥åŠ›:** ãƒ¬ãƒãƒ¼ãƒˆIDã€é€ä¿¡å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- **å‡ºåŠ›:** é€ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### 5.5 `sync-to-sheets`
- **æ©Ÿèƒ½:** ãƒ‡ãƒ¼ã‚¿ã‚’Google Sheetsã«åŒæœŸ
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:** `/functions/v1/sync-to-sheets`
- **å…¥åŠ›:** åº—èˆ—IDã€æœŸé–“
- **å‡¦ç†:**
  1. æ—¥å ±ãƒ‡ãƒ¼ã‚¿å–å¾—
  2. Google Sheets API ã§æ›¸ãè¾¼ã¿

**å…±é€šä»•æ§˜:**
- **CORSå¯¾å¿œ:** å…¨ã¦ã®Edge Functionã§å¿…é ˆãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:** try-catchã§ãƒ©ãƒƒãƒ—
- **ç’°å¢ƒå¤‰æ•°:** è‡ªå‹•æ³¨å…¥ (SUPABASE_URL, SUPABASE_ANON_KEYç­‰)

---

## 6. ç’°å¢ƒå¤‰æ•°

### é–‹ç™ºç’°å¢ƒ (`.env`)
```bash
# Supabase
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
VITE_USE_SUPABASE=false  # false=ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã€true=æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰

# OpenAI (Edge Functionsç”¨ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¸è¦)
OPENAI_API_KEY=sk-...

# Google Sheets (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
VITE_GOOGLE_SHEETS_API_KEY=your-api-key
VITE_GOOGLE_SHEET_ID=your-sheet-id

# LINE Bot (æœªå®Ÿè£…)
LINE_CHANNEL_SECRET=your-secret
LINE_CHANNEL_ACCESS_TOKEN=your-token
```

### æœ¬ç•ªç’°å¢ƒ (`.env.production`)
```bash
# Supabase (æœ¬ç•ª)
VITE_SUPABASE_URL=https://prod-project.supabase.co
VITE_SUPABASE_ANON_KEY=prod-anon-key

# æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰å¿…é ˆ
VITE_USE_SUPABASE=true

# ãã®ä»–APIè¨­å®š
OPENAI_API_KEY=sk-prod-...
VITE_GOOGLE_SHEETS_API_KEY=prod-api-key
VITE_GOOGLE_SHEET_ID=prod-sheet-id
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„:**
- ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ãƒ¼ãƒ«ã‚­ãƒ¼ã¯ **çµ¶å¯¾ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«å«ã‚ãªã„**
- Edge Functionså†…ã§ã®ã¿ä½¿ç”¨
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `.gitignore` ã«å«ã‚ã‚‹

---

## 7. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ 

### å…¬é–‹ãƒšãƒ¼ã‚¸ (èªè¨¼ä¸è¦)
- `/login` - ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
- `/share/report/:shareToken` - å…±æœ‰ãƒ¬ãƒãƒ¼ãƒˆ
- `/invite/:token` - çµ„ç¹”æ‹›å¾…å—è«¾
- `/terms` - åˆ©ç”¨è¦ç´„
- `/privacy` - ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼

### èªè¨¼æ¸ˆã¿ãƒšãƒ¼ã‚¸ (AuthGate)
- `/` â†’ `/dashboard/daily` (ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ)
- `/dashboard/daily` - æ—¥æ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/dashboard/weekly` - é€±æ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/dashboard/monthly` - æœˆæ¬¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/targets` - ç›®æ¨™è¨­å®š
- `/chat` - AIãƒãƒ£ãƒƒãƒˆ
- `/ai-reports` - AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§
- `/report/new` - æ–°è¦æ—¥å ±ä½œæˆ
- `/report` - æ—¥å ±ç·¨é›†
- `/expenses/monthly` - æœˆæ¬¡çµŒè²»å…¥åŠ›
- `/staff` - ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç† (ç®¡ç†è€…ã®ã¿)
- `/admin` - ç®¡ç†è€…è¨­å®š (ç®¡ç†è€…ã®ã¿)
- `/organization` - çµ„ç¹”è¨­å®š (Owner/Adminã®ã¿)

### ç‰¹æ®Šãƒ«ãƒ¼ãƒˆ
- `/auth/callback` - èªè¨¼ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ (Supabase)

---

## 8. é–‹ç™ºãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

### é–‹ç™ºã‚³ãƒãƒ³ãƒ‰
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (ãƒãƒ¼ãƒˆ5173)
npm run dev

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰çµæœã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run preview
```

### ãƒ“ãƒ«ãƒ‰è¨­å®š
- **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼:** Vite
- **ã‚³ãƒ¼ãƒ‰åœ§ç¸®:** Terser (console.logé™¤å»)
- **ã‚³ãƒ¼ãƒ‰åˆ†å‰²:**
  - `react-vendor` (React, React DOM, React Router)
  - `chart-vendor` (Chart.js, Recharts)
  - `ui-vendor` (Radix UI, Lucide React)
- **è­¦å‘Šé–¾å€¤:** 1000KB

### ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•

#### 1. Netlify (æ¨å¥¨)
```bash
# netlify.toml è¨­å®šæ¸ˆã¿
# GitHubé€£æºã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```

#### 2. Vercel
```bash
# vercel.json è¨­å®šæ¸ˆã¿
# Vercel CLI ã¾ãŸã¯ GitHubé€£æº
vercel --prod
```

#### 3. æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
npm run build
# dist/ ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä»»æ„ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
```

### Supabaseè¨­å®š
1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ:** Supabase Dashboard
2. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ:**
   ```bash
   # Supabase CLI (ãƒ­ãƒ¼ã‚«ãƒ«)
   supabase db push

   # ã¾ãŸã¯ SQL Editorã§æ‰‹å‹•å®Ÿè¡Œ
   ```
3. **Edge Functions ãƒ‡ãƒ—ãƒ­ã‚¤:**
   ```bash
   # MCP Toolã‚’ä½¿ç”¨ (ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ)
   # ã¾ãŸã¯ Supabase CLI
   supabase functions deploy chat-gpt
   supabase functions deploy generate-ai-report
   supabase functions deploy scheduled-report-generator
   supabase functions deploy send-report-email
   supabase functions deploy sync-to-sheets
   ```
4. **ç’°å¢ƒå¤‰æ•°è¨­å®š:**
   - Supabase Dashboard â†’ Settings â†’ Secrets
   - `OPENAI_API_KEY` ç­‰ã‚’è¨­å®š

---

## 9. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 9.1 æ—¥å ±å…¥åŠ›ãƒ•ãƒ­ãƒ¼
```
[ã‚¹ã‚¿ãƒƒãƒ•] â†’ ReportForm.tsx
    â†“
[ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼] â†’ TypeScriptå‹ãƒã‚§ãƒƒã‚¯
    â†“
[Supabase Insert] â†’ daily_reports ãƒ†ãƒ¼ãƒ–ãƒ«
    â†“ (RLSè‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿: organization_id)
[ä¿å­˜æˆåŠŸ] â†’ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«åæ˜ 
    â†“
[ã‚ªãƒ—ã‚·ãƒ§ãƒ³] â†’ Google SheetsåŒæœŸ (sync-to-sheets)
```

### 9.2 AIãƒãƒ£ãƒƒãƒˆãƒ•ãƒ­ãƒ¼
```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼] â†’ AIChatPage.tsx â†’ AIChat.tsx
    â†“
[ä½¿ç”¨é‡ãƒã‚§ãƒƒã‚¯] â†’ useAIUsageLimit.ts
    â†“ (åˆ¶é™OK)
[Edge Function] â†’ chat-gpt (Supabase Function)
    â†“
[OpenAI API] â†’ ChatGPT-4 (gpt-4-turbo)
    â†“
[å¿œç­”å–å¾—] â†’ ai_messages ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
    â†“
[UIæ›´æ–°] â†’ ãƒãƒ£ãƒƒãƒˆç”»é¢ã«è¡¨ç¤º
    â†“
[ä½¿ç”¨é‡è¨˜éŒ²] â†’ ai_usage_tracking ã«è¨˜éŒ²
```

### 9.3 AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ•ãƒ­ãƒ¼
```
[ç®¡ç†è€…] â†’ GenerateReportDialog.tsx
    â†“
[ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›] â†’ åº—èˆ—ã€æœŸé–“ã€ãƒ¬ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—
    â†“
[Edge Function] â†’ generate-ai-report
    â†“
[ãƒ‡ãƒ¼ã‚¿å–å¾—] â†’ daily_reports, targets ç­‰
    â†“
[OpenAI API] â†’ ãƒ¬ãƒãƒ¼ãƒˆæ–‡ç« ç”Ÿæˆ
    â†“
[ä¿å­˜] â†’ ai_generated_reports ãƒ†ãƒ¼ãƒ–ãƒ«
    â†“
[å…±æœ‰URLç”Ÿæˆ] â†’ share_token ç™ºè¡Œ
    â†“
[ãƒ¡ãƒ¼ãƒ«é€ä¿¡] â†’ send-report-email (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
```

### 9.4 ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ•ãƒ­ãƒ¼
```
[Cron Trigger] â†’ Supabase Scheduler
    â†“
[Edge Function] â†’ scheduled-report-generator
    â†“
[ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å–å¾—] â†’ report_schedules (enabled=true)
    â†“
[å„ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ] â†’ generate-ai-report å‘¼ã³å‡ºã—
    â†“
[ãƒ­ã‚°è¨˜éŒ²] â†’ report_generation_logs
    â†“
[ãƒ¡ãƒ¼ãƒ«é€ä¿¡] â†’ send-report-email
```

---

## 10. çŠ¶æ…‹ç®¡ç†

### 10.1 React Context
1. **AuthContext** (`src/contexts/AuthContext.tsx`)
   - èªè¨¼çŠ¶æ…‹ç®¡ç†
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
   - ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

2. **OrganizationContext** (`src/contexts/OrganizationContext.tsx`)
   - ç¾åœ¨ã®çµ„ç¹”æƒ…å ±
   - çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§
   - çµ„ç¹”åˆ‡ã‚Šæ›¿ãˆ (å°†æ¥å¯¾å¿œ)

3. **StoreContext** (`src/contexts/StoreContext.tsx`)
   - ç¾åœ¨é¸æŠä¸­ã®åº—èˆ—
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªåº—èˆ—ä¸€è¦§

4. **AdminDataContext** (`src/contexts/AdminDataContext.tsx`)
   - ç®¡ç†è€…ç”¨ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - åº—èˆ—ä¸€è¦§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ç­‰

### 10.2 ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
- `useAIReports` - AIç”Ÿæˆãƒ¬ãƒãƒ¼ãƒˆç®¡ç†
- `useAIUsageLimit` - AIä½¿ç”¨é‡åˆ¶é™ãƒã‚§ãƒƒã‚¯
- `useChatArchive` - ãƒãƒ£ãƒƒãƒˆå±¥æ­´ç®¡ç†
- `useDailyTarget` - æ—¥æ¬¡ç›®æ¨™å–å¾—ãƒ»æ›´æ–°
- `useExpenseBaseline` - çµŒè²»ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³
- `useKpis` - KPIè¨ˆç®—
- `useReports` - æ—¥å ±ãƒ‡ãƒ¼ã‚¿å–å¾—
- `useStores` - åº—èˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- `useTargets` - ç›®æ¨™ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- `useUsageLimits` - ä½¿ç”¨é‡åˆ¶é™ç®¡ç†

---

## 11. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### 11.1 èªè¨¼ãƒ»èªå¯
- âœ… Supabase Auth (Email/Password)
- âœ… JWT ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼
- âœ… Row Level Security (RLS) ã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- âœ… å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ (RBAC)
- âœ… AuthGate ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã‚‹ä¿è­·

### 11.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·
- âœ… çµ„ç¹”é–“å®Œå…¨ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ (organization_id)
- âœ… SQL Injection å¯¾ç­– (Supabase ORM)
- âœ… XSS å¯¾ç­– (React ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¿è­·)
- âœ… CSRF å¯¾ç­– (JWT ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼)

### 11.3 API ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âœ… Edge Functions ã§ã® JWT æ¤œè¨¼
- âœ… CORS ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
- âœ… Rate Limiting (ä½¿ç”¨é‡åˆ¶é™)
- âœ… ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹ç§˜å¯†éµç®¡ç†

### 11.4 ç›£æŸ»
- âœ… ç›£æŸ»ãƒ­ã‚°è¨˜éŒ² (audit_logs)
- âœ… åˆ©ç”¨è¦ç´„åŒæ„ç®¡ç† (terms_acceptance)
- âœ… AI ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

### 11.5 æœªå®Ÿè£…ãƒ»æ¨å¥¨å¯¾ç­–
- âš ï¸ Two-Factor Authentication (2FA)
- âš ï¸ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¤‡é›‘åº¦ãƒãƒªã‚·ãƒ¼
- âš ï¸ IPåˆ¶é™ãƒ»Geo-Blocking
- âš ï¸ HTTPS è¨¼æ˜æ›¸ (ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒä¾å­˜)
- âš ï¸ WAF (Web Application Firewall)

---

## 12. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 12.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- âœ… ã‚³ãƒ¼ãƒ‰åˆ†å‰² (react-vendor, chart-vendor, ui-vendor)
- âœ… é…å»¶èª­ã¿è¾¼ã¿ (React.lazy - æœªå®Ÿè£…)
- âœ… Terser ã«ã‚ˆã‚‹åœ§ç¸®ãƒ»æœ€é©åŒ–
- âœ… Tree Shaking (Vite)
- âœ… CSS-in-JS æœ€é©åŒ– (Tailwind CSS)

### 12.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- âœ… ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ (organization_id, store_id, dateç­‰)
- âœ… è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š)
- âœ… ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚° (æœªå®Ÿè£… - å¤§è¦æ¨¡æ™‚æ¤œè¨)

### 12.3 API
- âœ… Edge Functions (ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·)
- âœ… ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° (React Queryæœªä½¿ç”¨ - æ¤œè¨ä½™åœ°)
- âš ï¸ ãƒ¬ã‚¹ãƒãƒ³ã‚¹åœ§ç¸® (Gzip/Brotli - ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ä¾å­˜)

### 12.4 ãƒãƒ£ãƒ¼ãƒˆãƒ»UI
- âœ… Chart.js / Recharts ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- âš ï¸ ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« (å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºæ™‚ - TanStack Tableå¯¾å¿œå¯)

---

## 13. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ (æœªå®Ÿè£…)

### æ¨å¥¨ãƒ†ã‚¹ãƒˆæ§‹æˆ
```
tests/
â”œâ”€â”€ unit/                # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ utils/          # è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ services/       # APIå‘¼ã³å‡ºã—
â”‚   â””â”€â”€ hooks/          # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ integration/         # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ api/            # Edge Functions
â”œâ”€â”€ e2e/                # E2Eãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ auth.spec.ts    # èªè¨¼ãƒ•ãƒ­ãƒ¼
â”‚   â”œâ”€â”€ report.spec.ts  # æ—¥å ±å…¥åŠ›
â”‚   â””â”€â”€ dashboard.spec.ts # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â””â”€â”€ fixtures/            # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
```

### æ¨å¥¨ãƒ„ãƒ¼ãƒ«
- **ãƒ¦ãƒ‹ãƒƒãƒˆ/çµ±åˆ:** Vitest
- **E2E:** Playwright / Cypress
- **ã‚«ãƒãƒ¬ãƒƒã‚¸:** Istanbul (c8)

---

## 14. ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»

### 14.1 çŸ­æœŸ (1-3ãƒ¶æœˆ)
- [ ] LINE Bot å®Ÿè£… (æ—¥å ±ã®LINEå…¥åŠ›)
- [ ] ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª (React Native / PWA)
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥æ©Ÿèƒ½
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (CSV/Excel)
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè£… (Unit/E2E)

### 14.2 ä¸­æœŸ (3-6ãƒ¶æœˆ)
- [ ] åœ¨åº«ç®¡ç†æ©Ÿèƒ½
- [ ] ã‚·ãƒ•ãƒˆç®¡ç†æ©Ÿèƒ½
- [ ] è«‹æ±‚æ›¸ç®¡ç†
- [ ] Stripeçµ±åˆ (ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ±ºæ¸ˆ)
- [ ] å¤šè¨€èªå¯¾å¿œ (i18n)

### 14.3 é•·æœŸ (6ãƒ¶æœˆä»¥ä¸Š)
- [ ] äºˆæ¸¬åˆ†æ (AIå£²ä¸Šäºˆæ¸¬)
- [ ] è¤‡æ•°çµ„ç¹”åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
- [ ] ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£é€£æº (POSã€ä¼šè¨ˆã‚½ãƒ•ãƒˆç­‰)
- [ ] ãƒ›ãƒ¯ã‚¤ãƒˆãƒ©ãƒ™ãƒ«å¯¾å¿œ
- [ ] ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ç‰ˆæä¾›

---

## 15. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### 1. èªè¨¼ã‚¨ãƒ©ãƒ¼: "Invalid token"
**åŸå› :** JWT ãƒˆãƒ¼ã‚¯ãƒ³æœŸé™åˆ‡ã‚Œã€ã¾ãŸã¯ä¸æ­£ãªãƒˆãƒ¼ã‚¯ãƒ³
**è§£æ±º:**
```typescript
// å¼·åˆ¶ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ â†’ å†ãƒ­ã‚°ã‚¤ãƒ³
await supabase.auth.signOut()
```

#### 2. RLS ã‚¨ãƒ©ãƒ¼: "new row violates row-level security policy"
**åŸå› :** organization_id ãŒ NULLã€ã¾ãŸã¯æ¨©é™ä¸è¶³
**è§£æ±º:**
```sql
-- organization_id ã‚’è‡ªå‹•è¨­å®šã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ç¢ºèª
SELECT * FROM pg_trigger WHERE tgname LIKE '%org%';

-- æ‰‹å‹•è¨­å®š
UPDATE profiles SET organization_id = 'your-org-id' WHERE id = 'user-id';
```

#### 3. Edge Function ã‚¨ãƒ©ãƒ¼: "Function not found"
**åŸå› :** Edge Function ãŒæœªãƒ‡ãƒ—ãƒ­ã‚¤
**è§£æ±º:**
```bash
supabase functions deploy chat-gpt
```

#### 4. ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼: "Module not found"
**åŸå› :** ä¾å­˜é–¢ä¿‚ã®ä¸è¶³
**è§£æ±º:**
```bash
rm -rf node_modules package-lock.json
npm install
```

#### 5. ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„
**åŸå› :** ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰/æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰è¨­å®šãƒŸã‚¹
**è§£æ±º:**
```bash
# .env ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
VITE_USE_SUPABASE=true  # æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
VITE_USE_SUPABASE=false # ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
```

---

## 16. ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### æ¨å¥¨ç›£è¦–é …ç›®
1. **ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡**
   - Uptime (99.9% ç›®æ¨™)
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ  (<200ms)

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹**
   - DAU/MAU (Daily/Monthly Active Users)
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“
   - é›¢è„±ç‡

3. **ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹**
   - æ—¥å ±å…¥åŠ›ç‡
   - AIä½¿ç”¨ç‡
   - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå›æ•°
   - ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç¶™ç¶šç‡

4. **ã‚¨ãƒ©ãƒ¼ç›£è¦–**
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡
   - 500ã‚¨ãƒ©ãƒ¼ä»¶æ•°
   - èªè¨¼å¤±æ•—å›æ•°

### æ¨å¥¨ãƒ„ãƒ¼ãƒ«
- **Sentry** - ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- **Google Analytics / Mixpanel** - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ
- **Supabase Dashboard** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›£è¦–
- **Vercel/Netlify Analytics** - ãƒ‡ãƒ—ãƒ­ã‚¤ç›£è¦–

---

## 17. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»åˆ©ç”¨è¦ç´„

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹
- **Private** (éå…¬é–‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)
- å•†ç”¨åˆ©ç”¨å¯èƒ½ (çµ„ç¹”å†…)

### ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ©ã‚¤ã‚»ãƒ³ã‚¹
- **React, React Router:** MIT License
- **Supabase:** Apache 2.0 License
- **Tailwind CSS:** MIT License
- **Chart.js, Recharts:** MIT License
- **Radix UI:** MIT License
- **Lucide React:** ISC License

### ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨è¦ç´„
- `/terms` - åˆ©ç”¨è¦ç´„ãƒšãƒ¼ã‚¸
- `/privacy` - ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ãƒšãƒ¼ã‚¸
- ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæ„ç®¡ç† (`terms_acceptance` ãƒ†ãƒ¼ãƒ–ãƒ«)

---

## 18. é€£çµ¡å…ˆãƒ»ã‚µãƒãƒ¼ãƒˆ

### é–‹ç™ºãƒãƒ¼ãƒ 
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…:** (æœªè¨­å®š)
- **æŠ€è¡“ãƒªãƒ¼ãƒ‰:** (æœªè¨­å®š)

### ã‚µãƒãƒ¼ãƒˆãƒãƒ£ãƒãƒ«
- **ãƒ¡ãƒ¼ãƒ«:** support@example.com (æœªè¨­å®š)
- **Slack/Discord:** (æœªè¨­å®š)
- **GitHub Issues:** (æœªè¨­å®š)

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **æœ¬ãƒ•ã‚¡ã‚¤ãƒ«:** `SYSTEM_OVERVIEW.md`
- **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆ:** `MULTITENANT_ARCHITECTURE.md`
- **ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰:** `PRODUCTION_DEPLOY.md`
- **APIè¨­å®š:** `OPENAI_SETUP.md`, `GOOGLE_SHEETS_SETUP.md`

---

## 19. å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|---------|
| 2025-10-24 | 1.0.0 | åˆç‰ˆä½œæˆ - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ¦‚è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |

---

## ä»˜éŒ²

### A. TypeScript ä¸»è¦å‹å®šç¾©

```typescript
// çµ„ç¹”
interface Organization {
  id: string
  name: string
  slug: string
  subscriptionStatus: 'trial' | 'active' | 'suspended' | 'cancelled'
  subscriptionPlan: 'free' | 'starter' | 'business' | 'enterprise'
  maxStores: number
  maxUsers: number
  maxAiRequestsPerMonth: number
}

// ãƒ¦ãƒ¼ã‚¶ãƒ¼
interface User {
  id: string
  email: string
  role: 'staff' | 'manager' | 'admin'
  organizationId: string
}

// æ—¥å ±
interface DailyReport {
  id: string
  date: string
  storeId: string
  sales: number
  purchase: number
  laborCost: number
  utilities: number
  rent: number
  // ... ä»–ã®çµŒè²»é …ç›®
  reportText: string
}

// KPI
interface KpiData {
  totalSales: number
  grossProfit: number
  grossProfitMargin: number
  operatingProfit: number
  operatingProfitMargin: number
  costRate: number
  laborRate: number
}
```

### B. ç’°å¢ƒå¤‰æ•°ä¸€è¦§

| å¤‰æ•°å | å¿…é ˆ | èª¬æ˜ | ä¾‹ |
|--------|------|------|-----|
| `VITE_SUPABASE_URL` | âœ… | Supabase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURL | `https://xxx.supabase.co` |
| `VITE_SUPABASE_ANON_KEY` | âœ… | Supabase åŒ¿åã‚­ãƒ¼ | `eyJhbGciOi...` |
| `VITE_USE_SUPABASE` | âœ… | æœ¬ç•ª/ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ | `true` / `false` |
| `OPENAI_API_KEY` | ğŸ”¶ | OpenAI APIã‚­ãƒ¼ (Edge Functions) | `sk-proj-...` |
| `VITE_GOOGLE_SHEETS_API_KEY` | âšª | Google Sheets APIã‚­ãƒ¼ | `AIza...` |
| `VITE_GOOGLE_SHEET_ID` | âšª | Google Sheet ID | `1Abc...` |
| `LINE_CHANNEL_SECRET` | âšª | LINE ãƒãƒ£ãƒãƒ«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ | `xxx` |
| `LINE_CHANNEL_ACCESS_TOKEN` | âšª | LINE ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ | `xxx` |

âœ… å¿…é ˆ / ğŸ”¶ AIæ©Ÿèƒ½ã«å¿…é ˆ / âšª ã‚ªãƒ—ã‚·ãƒ§ãƒ³

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç†è§£ã¨é‹ç”¨ã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚**
**è³ªå•ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚**
