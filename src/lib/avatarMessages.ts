type MessageType = 'success' | 'error' | 'loading' | 'info';

interface MessagePattern {
  pattern: RegExp;
  success?: string;
  error?: string;
  loading?: string;
  info?: string;
}

const messagePatterns: MessagePattern[] = [
  {
    pattern: /ä¿å­˜ã—ã¾ã—ãŸ|ä¿å­˜å®Œäº†|ä¿å­˜æˆåŠŸ/i,
    success: 'ãƒãƒƒãƒãƒªä¿å­˜ã—ãŸãƒ¯ãƒ³ï¼ğŸ‘',
    loading: 'ä¿å­˜ä¸­ã ãƒ¯ãƒ³...ã¡ã‚‡ã£ã¨å¾…ã£ã¦ãƒ¯ãƒ³ï¼'
  },
  {
    pattern: /å‰Šé™¤ã—ã¾ã—ãŸ|å‰Šé™¤å®Œäº†/i,
    success: 'å‰Šé™¤ã—ãŸãƒ¯ãƒ³ï¼ã‚¹ãƒƒã‚­ãƒªã—ãŸãƒ¯ãƒ³ï¼ğŸ—‘ï¸',
    loading: 'å‰Šé™¤ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ å‰Šé™¤ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /æ›´æ–°ã—ã¾ã—ãŸ|æ›´æ–°å®Œäº†/i,
    success: 'æ›´æ–°ã—ãŸãƒ¯ãƒ³ï¼ãƒ”ã‚«ãƒ”ã‚«ã ãƒ¯ãƒ³ï¼âœ¨',
    loading: 'æ›´æ–°ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ æ›´æ–°ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /ä½œæˆã—ã¾ã—ãŸ|ä½œæˆå®Œäº†|ç™»éŒ²ã—ã¾ã—ãŸ|ç™»éŒ²å®Œäº†/i,
    success: 'ä½œæˆã—ãŸãƒ¯ãƒ³ï¼ã‚„ã£ãŸãƒ¯ãƒ³ï¼ğŸ‰',
    loading: 'ä½œæˆä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ ä½œæˆã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /é€ä¿¡ã—ã¾ã—ãŸ|é€ä¿¡å®Œäº†/i,
    success: 'é€ä¿¡ã—ãŸãƒ¯ãƒ³ï¼å±Šã„ãŸãƒ¯ãƒ³ï¼ğŸ“¨',
    loading: 'é€ä¿¡ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ é€ä¿¡ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ|ã‚³ãƒ”ãƒ¼å®Œäº†|ã‚³ãƒ”ãƒ¼/i,
    success: 'ã‚³ãƒ”ãƒ¼ã—ãŸãƒ¯ãƒ³ï¼ğŸ“‹',
    info: 'ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ãŸãƒ¯ãƒ³ï¼',
    error: 'ãã…ï½ã‚“ğŸ’¦ ã‚³ãƒ”ãƒ¼ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /å‰æ—¥ã®ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸ/i,
    info: 'å‰æ—¥ã®ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸãƒ¯ãƒ³...ğŸ“'
  },
  {
    pattern: /ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸ|ãƒ‡ãƒ¼ã‚¿ãŒãªã„/i,
    info: 'ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸãƒ¯ãƒ³...ğŸ“',
    error: 'ãã…ï½ã‚“ğŸ’¦ ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰|ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/i,
    success: 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ¯ãƒ³ï¼ãƒãƒƒãƒãƒªã ãƒ¯ãƒ³ï¼ğŸ“¤',
    loading: 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ|ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰/i,
    success: 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ¯ãƒ³ï¼å—ã‘å–ã£ã¦ãƒ¯ãƒ³ï¼ğŸ“¥',
    loading: 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /èªè¨¼|ãƒ­ã‚°ã‚¤ãƒ³/i,
    success: 'ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¯ãƒ³ï¼ãŠã‹ãˆã‚Šãƒ¯ãƒ³ï¼ğŸ¾',
    loading: 'ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ/i,
    success: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ãŸãƒ¯ãƒ³ï¼ã¾ãŸã­ãƒ¯ãƒ³ï¼ğŸ‘‹',
    loading: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆä¸­ã ãƒ¯ãƒ³...'
  },
  {
    pattern: /æ‹›å¾…|invite/i,
    success: 'æ‹›å¾…ãƒ¡ãƒ¼ãƒ«ã‚’é€ã£ãŸãƒ¯ãƒ³ï¼ğŸ“¬',
    loading: 'æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ æ‹›å¾…ãƒ¡ãƒ¼ãƒ«ã‚’é€ã‚Œãªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /ç›®æ¨™é”æˆ|é”æˆ/i,
    success: 'ã‚ãï½ã„ï¼ç›®æ¨™é”æˆã ãƒ¯ãƒ³ï¼ğŸ¯âœ¨',
    info: 'ãŠã‚ã§ã¨ã†ãƒ¯ãƒ³ï¼ã™ã”ã„ãƒ¯ãƒ³ï¼'
  },
  {
    pattern: /ã‚¨ãƒ©ãƒ¼|å¤±æ•—|error|failed/i,
    error: 'ãã…ï½ã‚“ğŸ’¦ ã†ã¾ãã„ã‹ãªã‹ã£ãŸãƒ¯ãƒ³...',
    info: 'ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã»ã—ã„ãƒ¯ãƒ³ï¼'
  },
  {
    pattern: /æ¥ç¶š|connect/i,
    success: 'æ¥ç¶šã—ãŸãƒ¯ãƒ³ï¼æº–å‚™OKã ãƒ¯ãƒ³ï¼ğŸ”Œ',
    loading: 'æ¥ç¶šä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ æ¥ç¶šã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /åŒæœŸ|sync/i,
    success: 'åŒæœŸã—ãŸãƒ¯ãƒ³ï¼æœ€æ–°ã ãƒ¯ãƒ³ï¼ğŸ”„',
    loading: 'åŒæœŸä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ åŒæœŸã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /æ¤œè¨¼|verify/i,
    success: 'æ¤œè¨¼OKã ãƒ¯ãƒ³ï¼ãƒãƒƒãƒãƒªã ãƒ¯ãƒ³ï¼âœ…',
    loading: 'æ¤œè¨¼ä¸­ã ãƒ¯ãƒ³...',
    error: 'ãã…ï½ã‚“ğŸ’¦ æ¤œè¨¼ã§ããªã‹ã£ãŸãƒ¯ãƒ³...'
  },
  {
    pattern: /å‡¦ç†å®Œäº†|complete/i,
    success: 'å‡¦ç†å®Œäº†ã—ãŸãƒ¯ãƒ³ï¼ãŠç–²ã‚Œæ§˜ãƒ¯ãƒ³ï¼ğŸŠ',
    loading: 'å‡¦ç†ä¸­ã ãƒ¯ãƒ³...'
  }
];

const defaultMessages = {
  success: 'ã§ããŸãƒ¯ãƒ³ï¼ğŸ‘',
  error: 'ãã…ï½ã‚“ğŸ’¦ ã†ã¾ãã„ã‹ãªã‹ã£ãŸãƒ¯ãƒ³...',
  loading: 'å‡¦ç†ä¸­ã ãƒ¯ãƒ³...ã¡ã‚‡ã£ã¨å¾…ã£ã¦ãƒ¯ãƒ³ï¼',
  info: 'ãŠçŸ¥ã‚‰ã›ã ãƒ¯ãƒ³ï¼ğŸ“¢'
};

export function convertToAvatarMessage(message: string, type: MessageType): string {
  if (!message) {
    return defaultMessages[type];
  }

  for (const pattern of messagePatterns) {
    if (pattern.pattern.test(message)) {
      const avatarMessage = pattern[type];
      if (avatarMessage) {
        return avatarMessage;
      }
    }
  }

  return defaultMessages[type];
}

export function getEmotionForMessageType(type: MessageType): 'happy' | 'sad' | 'thinking' | 'normal' {
  switch (type) {
    case 'success':
      return 'happy';
    case 'error':
      return 'sad';
    case 'loading':
      return 'thinking';
    case 'info':
      return 'normal';
    default:
      return 'normal';
  }
}
